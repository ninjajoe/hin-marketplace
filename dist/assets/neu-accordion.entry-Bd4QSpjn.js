import{h as f,H as b,g as m,r as g,c as y}from"./index-CqKYxqU4.js";import{b as h,a as A,u as x}from"./utilities-a180c6fa-DAHwV70L.js";var I=function(c,e,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function s(d){try{r(n.next(d))}catch(l){o(l)}}function u(d){try{r(n.throw(d))}catch(l){o(l)}}function r(d){d.done?i(d.value):a(d.value).then(s,u)}r((n=n.apply(c,e||[])).next())})},_=function(c,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(r){return function(d){return u([r,d])}}function u(r){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,r[0]&&(t=0)),t;)try{if(n=1,a&&(i=r[0]&2?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[r[0]&2,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return t.label++,{value:r[1],done:!1};case 5:t.label++,a=r[1],r=[0];continue;case 7:r=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(r[0]===6||r[0]===2)){t=0;continue}if(r[0]===3&&(!i||r[1]>i[0]&&r[1]<i[3])){t.label=r[1];break}if(r[0]===6&&t.label<i[1]){t.label=i[1],i=r;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(r);break}i[2]&&t.ops.pop(),t.trys.pop();continue}r=e.call(c,t)}catch(d){r=[6,d],a=0}finally{n=i=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},w=function(c){var e;c.tag;var t=c.space,n=Number(t),a=Number(t)-1>0?Number(t)-1:1;return f("div",{class:(e={},e["unit-content--inner"]=!0,e["px-".concat(n," py-").concat(a)]=Number(n)!==0,e)},f("slot",null))},C=function(){function c(e){g(this,e),this.neuChange=y(this,"neuChange"),this._tag="neu-accordion",this._id=x("accordion"),this.active=!1,this.kind="default",this.maxHeight=void 0,this.single=!1,this.space=4,this.unit="accordion",this._tabIndex=-1,this._ariaExpanded=!1}return c.prototype.setTabIndex=function(){var e,t;if(this.unit==="item"&&h(this.active)===!0){var n=this.getAccordionId(this.el),a=!1;if(n&&n!==null){var i=(t=(e=document==null?void 0:document.getElementById("".concat(n,"--header")))===null||e===void 0?void 0:e.classList)===null||t===void 0?void 0:t.contains("state-active");i&&i===!0&&(a=!0)}this._tabIndex=a===!1?-1:0}},c.prototype.setAriaExpanded=function(e){e.detail.id===this.getAccordionId(this.el)&&(this._ariaExpanded=e.detail.active)},c.prototype.handleOnKeyDown=function(e){this.unit==="header"&&A(e)&&this.toggleAccordion(e)},c.prototype.toggleAccordion=function(e){var t=this,n,a,i,o,s=e==null?void 0:e.target;if(!((n=s==null?void 0:s.classList)===null||n===void 0)&&n.contains("unit-header")&&this.unit==="header"){var u=(a=this.el)===null||a===void 0?void 0:a.closest(".unit-item"),r=(i=this.el)===null||i===void 0?void 0:i.closest(".neu-accordion");if(r&&u){var d=!!(!((o=r==null?void 0:r.classList)===null||o===void 0)&&o.contains("neu-accordion-single")),l=Array.from(r==null?void 0:r.querySelectorAll(".unit-item.state-active"));if(this.neuChange.emit({component:this._tag,id:u.id,active:!u.classList.contains("state-active")}),d&&l&&l.length>0){var v=l.filter(function(p){return p.id!==u.id});this.closeOther(v).then(function(){t.openClicked(u)})}else this.openClicked(u)}}},c.prototype.openClicked=function(e){var t=setTimeout(function(){var n,a=document==null?void 0:document.getElementById("".concat(e.id,"--content")),i=document==null?void 0:document.getElementById("".concat(e.id,"--header"));if(a&&i){var o=(n=e==null?void 0:e.classList)===null||n===void 0?void 0:n.contains("state-active");o===!0?e.classList.remove("state-active"):e.classList.add("state-active"),o===!0?e.setAttribute("active","false"):e.setAttribute("active","true"),o===!0?i.setAttribute("aria-expanded","false"):i.setAttribute("aria-expanded","true"),a.setAttribute("tabindex",o===!0?"-1":"0"),a.setAttribute("aria-disabled",o===!0?"true":"false")}clearTimeout(t)},10);return!0},c.prototype.closeOther=function(e){return I(this,void 0,void 0,function(){return _(this,function(t){return e.forEach(function(n){var a=document.getElementById(n.id);if(a){a.classList.remove("state-active"),a.setAttribute("active","false");var i=a.querySelector(".unit-header");i&&i.setAttribute("aria-expanded","false");var o=a.querySelector(".unit-content");o&&(o.setAttribute("tabindex","-1"),o.setAttribute("aria-disabled","true"))}}),[2,!0]})})},c.prototype.doAfterRender=function(){var e=this,t=setTimeout(function(){var n;e.setAriaLabels(e.el);var a=e.getAccordionId(e.el);if(a){var i=(n=document.getElementById(a))===null||n===void 0?void 0:n.parentElement;if(i){var o=i.querySelector(".state-active");if(o){var s=document.getElementById("".concat(o.id,"--content"));s&&(s.setAttribute("tabindex","0"),s.setAttribute("aria-disabled","false"),s.setAttribute("aria-expanded","true"))}}}clearTimeout(t)},10);return!0},c.prototype.getAccordionId=function(e){var t,n;return e.getAttribute("unit")==="item"?(t=this.el)===null||t===void 0?void 0:t.id:(n=e.closest(".unit-item"))===null||n===void 0?void 0:n.id},c.prototype.setAccordionId=function(e){var t=this._id,n=this.getAccordionId(this.el);return n&&e!=="accordion"&&e!=="item"&&(t="".concat(n,"--").concat(e)),t},c.prototype.setAriaRole=function(e){switch(e){case"item":return"group";case"header":return"button";case"content":return"region";default:return}},c.prototype.setAriaLabels=function(e){var t=this.getAccordionId(e);if(t&&this.unit==="header"&&this.el.setAttribute("aria-controls","".concat(t,"--content")),t&&this.unit==="content"){var n=document.getElementById(t);n&&(!n.hasAttribute("active")||n.getAttribute("active")==="false")&&this.el.setAttribute("aria-disabled","true")}},c.prototype.render=function(){var e,t,n=this,a=this.maxHeight!==void 0?(e={},e["--accordion-height"]="".concat(Number(this.maxHeight),"px"),e):void 0,i=(t={},t["".concat(this._tag)]=this.unit==="accordion",t["".concat(this._tag,"-single")]=this.unit==="accordion"&&h(this.single),t["kind-".concat(this.kind)]=this.unit==="accordion",t["unit-".concat(this.unit)]=this.unit!=="accordion",t["state-active"]=this.unit==="item"&&h(this.active)===!0,t);return f(b,{key:"3eb7930670b306472fbc6c64754ffd1f04259e83","aria-expanded":this.unit==="header"&&this._ariaExpanded.toString(),class:i,id:this.setAccordionId(this.unit),role:this.setAriaRole(this.unit),style:a,tabindex:this.unit==="header"?0:this._tabIndex,onClick:this.unit==="header"?function(o){return n.toggleAccordion(o)}:void 0,onKeyDown:function(o){return n.handleOnKeyDown(o)}},this.unit==="content"&&f(w,{key:"ee0137aa12b4ae48cd2fd9cce3458495babd7110",tag:this._tag,space:this.space}),this.unit!=="content"&&f("slot",{key:"4787eb2f9575edc149a0c5c6f360bbcea1c62760"}))},c.prototype.componentDidRender=function(){this.doAfterRender()},Object.defineProperty(c.prototype,"el",{get:function(){return m(this)},enumerable:!1,configurable:!0}),Object.defineProperty(c,"watchers",{get:function(){return{active:["setTabIndex"]}},enumerable:!1,configurable:!0}),c}();export{C as neu_accordion};
