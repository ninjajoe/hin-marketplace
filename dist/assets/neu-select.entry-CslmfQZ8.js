import{h as g,F as w,H as I,g as L,r as x,c as A}from"./index-CPNl2hWi.js";import{b,a as B,c as C,e as S,u as F}from"./utilities-a180c6fa-DAHwV70L.js";import{b as T,a as k}from"./functionals-0e75fd99-WQJp5OWB.js";import{S as q,a as O,b as P,c as M,d as V}from"./functionals-17c2ba0b-BLz_Zbz5.js";/*!
 * (C) HCA Healthcare Inc. http://hcahealthcare.com - MIT License
 */var K=function(){function s(e){x(this,e),this.neuForm=A(this,"neuForm"),this.neuChange=A(this,"neuChange"),this.neuFocus=A(this,"neuFocus"),this.neuBlur=A(this,"neuBlur"),this.neuFilter=A(this,"neuFilter"),e.$hostElement$["s-ei"]?this.internals=e.$hostElement$["s-ei"]:(this.internals=e.$hostElement$.attachInternals(),e.$hostElement$["s-ei"]=this.internals),this._tag="neu-form",this._field="neu-select",this._id=F("select"),this._allowMax=!1,this._formRole={select:"group",header:"presentation",option:"option"},this.autocomplete="off",this.disabled=void 0,this.invalid=void 0,this.label=void 0,this.labelHidden=!1,this.max=void 0,this.maxlength=void 0,this.min=void 0,this.minlength=void 0,this.name=void 0,this.pattern=void 0,this.readonly=!1,this.required=void 0,this.step=void 0,this.tip=void 0,this.unit="select",this.kind="single",this.color="blue",this.value=void 0,this.selected=!1,this.debounce=0,this.error=!1,this.multiple=!1,this.clear=!1,this.selectAll=!1,this.filter=!1,this._display=!1,this._selection={label:this.label,value:""},this._searchTerm="",this._selectAll=!1}return s.prototype.handleEmit=function(e){var i=this,t;this.value=e!=null&&e.value?e.value:null,this.neuForm.emit({component:this._field,id:e.id,name:e.name,label:e.label,value:this.value}),this.neuChange.emit({component:this._field,id:e.id,name:e.name,label:e.label,value:this.value});var n=setTimeout(function(){var d=document.getElementById("".concat(e==null?void 0:e.id,"-hidden"));d&&(d.value=i.value),clearTimeout(n)},15);try{var l=this.value!==void 0?this.value:null;(t=this.internals)===null||t===void 0||t.setFormValue(l)}catch{}return!0},s.prototype.handleOnInput=function(e){var i,t,n=e,l=this.getParentMeta(),d=!0,o=(t=(i=n==null?void 0:n.attributes)===null||i===void 0?void 0:i.value)===null||t===void 0?void 0:t.value,a=(n==null?void 0:n.textContent)||(n==null?void 0:n.getAttribute("aria-label"));if(this.selectionClear(l==null?void 0:l.id),l&&o&&a){var v=this.el,m=document.getElementById(l==null?void 0:l.id);if(this.value=o,v&&m){var f=b(l==null?void 0:l.multiple)===!0,p=!!(this._allowMax===!0&&(l!=null&&l.max)&&(l==null?void 0:l.max)!==void 0&&(l==null?void 0:l.max)!==null);if(f===!1)this.value=o;else{var h=document.getElementById("".concat(l==null?void 0:l.id,"-dropdown"));if(h){var u=this.countMultiSelect(h);if(u){var r=u==null?void 0:u.value,c=r==o||(r==null?void 0:r.includes(o));c===!0?o=r.filter(function(y){return y!==o}):(this._allowMax===!0&&p!==null&&r.length>=Number(l==null?void 0:l.max)?d=!1:r.push(o),a="multi",o=r)}}}d===!0?(this.handleEmit({id:l==null?void 0:l.id,name:l==null?void 0:l.id,label:a,value:o}),this.handleActiveAndClose()):(this.el.removeAttribute("selected"),this.el.setAttribute("aria-selected","false")),f===!1&&this.dropdownClose(l)}}},s.prototype.handleActiveAndClose=function(){var e=this,i=setTimeout(function(){e.el.hasAttribute("selected")||e.el.hasAttribute("aria-selected")&&e.el.getAttribute("aria-selected")==="true"?(e.el.removeAttribute("selected"),e.el.setAttribute("aria-selected","false")):(e.el.setAttribute("selected","true"),e.el.setAttribute("aria-selected","true")),clearTimeout(i)},15);return!0},s.prototype.getNextValidSibling=function(e){for(var i=e.nextElementSibling;i&&(i.classList.contains("unit-header")||i.classList.contains("d-none"))||i!=null&&i.classList.contains("state-disabled");)i=i.nextElementSibling;return i},s.prototype.getPreviousValidSibling=function(e){for(var i=e.previousElementSibling;i&&(i.classList.contains("unit-header")||i.classList.contains("d-none"))||i!=null&&i.classList.contains("state-disabled");)i=i.previousElementSibling;return i},s.prototype.handleOnKeydown=function(e){var i=this.getNextValidSibling(this.el),t=this.getPreviousValidSibling(this.el);this.unit==="option"&&(e==null?void 0:e.key)===" "?(e.preventDefault(),this.el.click()):B(e)?this.handleOnInput(e.target):i&&this.unit==="option"&&(e==null?void 0:e.key)==="ArrowDown"?(e.preventDefault(),i.setAttribute("tabindex","0"),i.focus({focusVisible:!1}),this.el.setAttribute("tabindex","-1")):t&&this.unit==="option"&&(e==null?void 0:e.key)==="ArrowUp"&&(e.preventDefault(),t.setAttribute("tabindex","0"),t.focus({focusVisible:!1}),this.el.setAttribute("tabindex","-1"))},s.prototype.enableFirstOption=function(){var e=this,i=setTimeout(function(){var t=document.getElementById(e._id),n=t==null?void 0:t.querySelector(".unit-dropdown"),l=n==null?void 0:n.querySelector(".dropdown-menu");if(t&&n&&l){var d=l.querySelector(".unit-option");d&&d.setAttribute("tabindex","0")}clearTimeout(i)},10)},s.prototype.handleKeyPress=function(e){var i=e.key.toLowerCase();this._searchTerm=i},s.prototype.handleOnFocusBlur=function(e){var i=this.getParentMeta();e==="focus"?this.neuFocus.emit({component:this._field,id:i==null?void 0:i._id}):this.neuBlur.emit({component:this._field,id:i==null?void 0:i._id})},s.prototype.dropdownClick=function(){var e=this.getParentMeta(),i=this._display;if(e&&(e!=null&&e.id))if(i===!0)this.dropdownClose(e);else{var t=document.getElementById(e==null?void 0:e.id),n=document.getElementById("".concat(e==null?void 0:e.id,"-placeholder")),l=document.getElementById("".concat(e==null?void 0:e.id,"-dropdown"));t&&n&&l&&(this.dropdownOpen(t,n,l),this.dropdownCloseOthers(e==null?void 0:e.id),this.dropdownFocusFirst(e==null?void 0:e.id))}},s.prototype.dropdownOpen=function(e,i,t){this._display=!0,e.classList.add("state-active"),i.setAttribute("aria-expanded","true"),C(i,t,"bottom-start",["top-start","bottom-end","top-end"],10,[0,4])},s.prototype.dropdownClose=function(e){var i=document.getElementById(e.id),t=document.getElementById("".concat(e.id,"-placeholder")),n=document.getElementById("".concat(e.id,"-dropdown"));i&&t&&n&&(i.classList.remove("state-active"),t.setAttribute("aria-expanded","false"),n.setAttribute("aria-expanded","false"),this._display=!1,this.focusSelectTrigger())},s.prototype.dropdownCloseOthers=function(e){var i=document==null?void 0:document.querySelectorAll(".unit-dropdown");i&&i.forEach(function(t){var n,l,d,o=t.id.replace("-dropdown","");o!==e&&(t==null||t.setAttribute("aria-expanded","false"),(n=t==null?void 0:t.previousElementSibling)===null||n===void 0||n.setAttribute("aria-expanded","false"),(d=(l=t==null?void 0:t.parentElement)===null||l===void 0?void 0:l.parentElement)===null||d===void 0||d.classList.remove("state-active"))})},s.prototype.dropdownFocusFirst=function(e){var i=document.getElementById(e),t=i==null?void 0:i.querySelector(".unit-dropdown"),n=t==null?void 0:t.querySelector(".dropdown-menu");if(i&&t&&n){var l=b(this.filter)===!0?t.querySelector("input"):n.querySelector(".unit-option");if(l)var d=setTimeout(function(){l.setAttribute("tabindex","0"),l.focus({focusVisible:!1}),clearTimeout(d)},100)}return!0},s.prototype.dropdownClickOutside=function(e){this.el.contains(e.target)||(this._display=!1)},s.prototype.dropdownKeyDown=function(e){var i,t,n=this.getParentMeta(),l=document.getElementById(n==null?void 0:n.id),d=(l==null?void 0:l.classList.contains("state-active"))||!1;if(l!=null&&l.contains(document.activeElement)){if(e.key==="Escape"){this._display=!1;var o=document.getElementById("".concat(n==null?void 0:n.id,"-placeholder"));o&&o.focus({focusVisible:!1})}else if(e.key==="Tab"&&l&&d===!0){var a=document==null?void 0:document.activeElement,v=!0;if(!((i=a==null?void 0:a.parentElement)===null||i===void 0)&&i.classList.contains("filter-wrapper")||!((t=a==null?void 0:a.parentElement)===null||t===void 0)&&t.classList.contains("select-all"))v=!1;else var m=setTimeout(function(){var f,p,h,u,r,c=document==null?void 0:document.activeElement;(((p=(f=c==null?void 0:c.parentElement)===null||f===void 0?void 0:f.parentElement)===null||p===void 0?void 0:p.classList.contains("unit-dropdown"))===!0||((h=c==null?void 0:c.parentElement)===null||h===void 0?void 0:h.classList.contains("select-all"))===!0||((u=c==null?void 0:c.parentElement)===null||u===void 0?void 0:u.classList.contains("dropdown-menu"))===!0||((r=c==null?void 0:c.parentElement)===null||r===void 0?void 0:r.classList.contains("filter-wrapper"))===!0)&&(v=!1),v===!0&&(l==null||l.classList.remove("state-active")),clearTimeout(m)},0)}return!0}},s.prototype.selectionClear=function(e){var i=document.getElementById(e),t=document.getElementById("".concat(e,"-dropdown")),n=(i==null?void 0:i.getAttribute("kind"))==="multiple"?!0:!!b(i==null?void 0:i.getAttribute("multiple"));if(i&&t&&!n){var l=t==null?void 0:t.querySelectorAll(".unit-option");l&&(l==null?void 0:l.length)>0&&l.forEach(function(d){d.removeAttribute("selected"),d.classList.remove("state-active")})}},s.prototype.selectionEmit=function(e){var i=this,t,n,l=this.getParentMeta(),d=e.detail.id===(l==null?void 0:l.id);if(d)var o=(t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.label,a=(n=e==null?void 0:e.detail)===null||n===void 0?void 0:n.value,v=setTimeout(function(){var h=document.getElementById(l==null?void 0:l.id),u=document.getElementById("".concat(l==null?void 0:l.id,"-dropdown")),r=h==null?void 0:h.classList.contains("kind-multiple"),c=i.countMultiSelect(h);h&&u&&r&&(o=c==null?void 0:c.label,a=c==null?void 0:c.value),(o===void 0||o==="null"||o=="")&&(o=i.label),i.value=a,i._selection={label:o,value:a},r===!1&&(i._display=!1),clearTimeout(v)},25);else{var m=document.getElementById(e.detail.id),f=document.getElementById("".concat(e.detail.id,"-placeholder")),p=document.getElementById("".concat(e.detail.id,"-dropdown"));m==null||m.classList.remove("state-active"),f==null||f.setAttribute("aria-expanded","false"),p==null||p.setAttribute("aria-expanded","false"),this._display=!1}return!0},s.prototype.selectionFocus=function(e){b(e)===!1&&(this.focusSelectTrigger(),this.resetFilterDropdown())},s.prototype.getParentMeta=function(){var e,i,t,n,l,d,o,a,v,m,f,p,h=this.unit==="select"?(e=this.el)===null||e===void 0?void 0:e.id:!((d=(l=(n=(t=(i=this.el)===null||i===void 0?void 0:i.parentElement)===null||t===void 0?void 0:t.parentElement)===null||n===void 0?void 0:n.parentElement)===null||l===void 0?void 0:l.parentElement)===null||d===void 0)&&d.id?(f=(m=(v=(a=(o=this.el)===null||o===void 0?void 0:o.parentElement)===null||a===void 0?void 0:a.parentElement)===null||v===void 0?void 0:v.parentElement)===null||m===void 0?void 0:m.parentElement)===null||f===void 0?void 0:f.id:"",u=document.getElementById(h),r=null;if(u&&u!==null){r={id:u==null?void 0:u.id,max:u==null?void 0:u.getAttribute("max"),multiple:(u==null?void 0:u.getAttribute("kind"))==="multiple"?!0:!!b(u==null?void 0:u.getAttribute("multiple")),value:u==null?void 0:u.getAttribute("value"),class:u==null?void 0:u.classList};var c=document.getElementById("".concat(h,"-dropdown"));r.options=(c==null?void 0:c.childElementCount)||null,r.selected=((p=c==null?void 0:c.querySelectorAll('[aria-selected="true"]'))===null||p===void 0?void 0:p.length)||null}return r},s.prototype.getInitialValue=function(){var e=this,i,t,n,l=(n=(t=(i=this.el)===null||i===void 0?void 0:i.parentElement)===null||t===void 0?void 0:t.classList)===null||n===void 0?void 0:n.contains("neu-pagination--results"),d=document.getElementById("".concat(this._id,"-dropdown")),o=void 0,a=this._selection;if(l)(this.value===null||this.value.length===0)&&(this.value="15");else if(typeof this.value=="string")try{this.value=Array.from(JSON.parse(this.value.replace(/'/g,'"')))}catch{this.value=this.value}if(d!=null&&(d!=null&&d.childElementCount)?o=d.querySelectorAll(".unit-option"):o=Array.from(this.el.children),o&&o.length>0){this.selectionClear(this._id);var v=Array.from(o).filter(function(h){var u,r;return h.value==e.value||h.value==((u=e.value)===null||u===void 0?void 0:u.toString())||h.hasAttribute("selected")&&b(h.getAttribute("selected"))===!0||typeof e.value!="string"&&e.value.length&&((r=e.value)===null||r===void 0?void 0:r.includes(h.value))});if(v&&v.length===1){var m=v[0],f={label:m.textContent,value:m.value};this._selection.label!==f.label&&this._selection.value!==f.value&&(a=f,m.setAttribute("selected","true"))}else if(v&&v.length>1){v.forEach(function(h){h.setAttribute("selected","true")});var p=this.value.length===0||this.value.length>1?"Options":"Option";a.label=this.value.length===0?this.label:"".concat(this.value.length," ").concat(p," Selected"),a.value=this.value}}return a},s.prototype.setInitialValue=function(e){e!==this._selection&&(this._selection=JSON.parse(JSON.stringify(e))),this._display=!1},s.prototype.filterDropdown=function(e){var i,t,n,l,d,o,a=this.getParentMeta(),v=document.getElementById(a==null?void 0:a.id),m=(i=v==null?void 0:v.querySelector(".dropdown-menu"))===null||i===void 0?void 0:i.querySelectorAll(".unit-option"),f=v==null?void 0:v.querySelector(".select-all .unit-option"),p=(n=(t=e==null?void 0:e.target)===null||t===void 0?void 0:t.value)===null||n===void 0?void 0:n.toLowerCase(),h=p==null?void 0:p.trim(),u=0;(l=v==null?void 0:v.classList)===null||l===void 0||l.remove("is-filtered"),m==null||m.forEach(function(r){r.classList.remove("d-none"),r.setAttribute("tabindex","0")}),p&&h!==""&&v&&m&&(v.classList.add("is-filtered"),m&&m.length>0&&(m.forEach(function(r){var c,y,E=(c=r==null?void 0:r.getAttribute("value"))===null||c===void 0?void 0:c.toLowerCase(),_=(y=r==null?void 0:r.textContent)===null||y===void 0?void 0:y.toLowerCase();h===""||E!=null&&E.includes(p)||_!=null&&_.includes(p)?(r.classList.remove("d-none"),r.setAttribute("tabindex","0"),u++):(r.classList.add("d-none"),r.setAttribute("tabindex","-1"))}),this.neuFilter.emit({component:this._field,id:a==null?void 0:a.id,filter:p})),p&&h!==""&&u<=0?(d=f==null?void 0:f.classList)===null||d===void 0||d.add("d-none"):(o=f==null?void 0:f.classList)===null||o===void 0||o.remove("d-none"))},s.prototype.resetFilterDropdown=function(){var e=this.getParentMeta(),i=document.getElementById(e==null?void 0:e.id),t=document.getElementById("".concat(e==null?void 0:e.id,"-filter"));if(i&&t){var n=i.querySelectorAll(".unit-option");i.classList.remove("is-filtered"),n&&n.forEach(function(l){l.classList.remove("d-none")}),t.value=""}},s.prototype.countMultiSelect=function(e){var i=e==null?void 0:e.querySelectorAll('[aria-selected="true"]'),t={label:"",value:new Array};if(i){var n=[],l=Array.from(i),d="Option";l.forEach(function(o){n.push(o.getAttribute("value"))}),(l.length===0||l.length>1)&&(d="Options"),t.label=l.length===0?this.label:"".concat(l.length," ").concat(d," Selected"),t.value=n}return t},s.prototype.clearSetSelection=function(){var e=this,i,t=this.getParentMeta(),n=(i=document.getElementById("".concat(t==null?void 0:t.id,"-dropdown")))===null||i===void 0?void 0:i.querySelector(".dropdown-menu");if(n){var l=n.querySelectorAll(".unit-option");l&&(l.forEach(function(o){o.setAttribute("aria-selected","false"),o.removeAttribute("selected"),o.classList.remove("state-active")}),this.neuForm.emit({component:this._field,id:t==null?void 0:t.id,name:t==null?void 0:t.id,value:null}),this.neuChange.emit({component:this._field,id:t==null?void 0:t.id,name:t==null?void 0:t.id,value:null}))}this.el.setAttribute("value","");var d=setTimeout(function(){e._selection={label:e.label,value:""},e.focusSelectTrigger(),clearTimeout(d),e._selectAll=!1},0);return!0},s.prototype.focusSelectTrigger=function(){var e,i=(e=this.getParentMeta())===null||e===void 0?void 0:e.id,t=document.getElementById("".concat(i,"-placeholder"));if(t)var n=setTimeout(function(){t!==null&&t.focus({focusVisible:!1}),clearTimeout(n)},50);return!0},s.prototype.setAriaSelected=function(){var e=void 0;return this.unit==="option"&&(e=b(this.selected).toString()),e},s.prototype.doSelectAll=function(){var e=this,i,t=this.getParentMeta(),n=(i=document.getElementById("".concat(t==null?void 0:t.id,"-dropdown")))===null||i===void 0?void 0:i.querySelector(".dropdown-menu"),l=[];if(n){var d=n.querySelectorAll(".unit-option");d&&(d.forEach(function(a){a.setAttribute("aria-selected","true"),a.setAttribute("selected",!0),a.classList.add("state-active"),l.push(a.getAttribute("value"))}),this.neuForm.emit({component:this._field,id:t==null?void 0:t.id,name:t==null?void 0:t.id,value:l}),this.neuChange.emit({component:this._field,id:t==null?void 0:t.id,name:t==null?void 0:t.id,value:l}))}var o=setTimeout(function(){e._selection={label:e.label,value:""},e.focusSelectTrigger(),clearTimeout(o)},0)},s.prototype.handleSelectAll=function(){this._selectAll=!this._selectAll,this._selectAll===!0?this.doSelectAll():this.clearSetSelection()},s.prototype.SelectBase=function(e,i,t,n){var l=this,d;return g(w,null,g(k,{id:this._id,tag:this._tag,label:this.label===void 0?this._id+"-label":this.label,labelHidden:b(this.labelHidden)===!0&&i===!1,required:b(this.required)===!0}),g("div",{class:"".concat(this._tag,"__native"),id:"".concat(this._id,"-native"),tabindex:"-1"},g(O,{id:this._id,field:this._field,display:b(this._display)===!0,disabled:b(this.disabled)===!0,label:(d=this._selection)===null||d===void 0?void 0:d.label,onClickEvent:S(function(){return l.dropdownClick()},10)}),g("div",{class:"unit-dropdown",id:"".concat(this._id,"-dropdown")},(e||t)&&g("div",{class:"".concat(this._field,"--filter")},e&&g(P,{tag:this._tag,field:this._field,id:this._id,color:this.color,onInputEvent:function(o){return l.filterDropdown(o)}}),this.kind==="multiple"&&t&&g(M,{active:this._selectAll,color:this.color,onClickEvent:function(){return l.handleSelectAll()}})),g("div",{class:"dropdown-menu",role:"listbox","aria-labelledby":"".concat(this._id,"-label")},g("slot",null))),g("input",{type:"hidden",name:this._id,id:"".concat(this._id,"-hidden"),value:this.value})),i&&n===!1&&g(q,{tag:this._tag,field:this._field,onClickEvent:function(){return l.clearSetSelection()}}),g(T,{tag:this._tag,id:this._id,tip:this.tip,invalid:this.invalid}))},s.prototype.render=function(){var e,i=this,t=this.unit==="option",n=this.kind==="multiple"||b(this.multiple)===!0?"multiple":"single",l=this.unit==="select"&&b(this._display)===!0||this.unit==="option"&&b(this.selected)===!0,d=(e={},e["".concat(this._tag)]=this.unit==="select",e["".concat(this._field)]=this.unit==="select",e["color-".concat(this.color)]=this.unit==="select",e["kind-".concat(n)]=this.unit==="select",e["unit-".concat(this.unit)]=this.unit!=="select",e["state-disabled"]=b(this.disabled)===!0,e["state-optional"]=this.unit==="select"&&b(this.required)===!1,e["state-error"]=!!(this.unit==="select"&&b(this.error)),e["state-active"]=l,e);return g(I,{key:"fc823198664771ebafa4026adf73ce72909de845","aria-selected":this.setAriaSelected(),class:d,id:this.unit==="select"?this._id:void 0,role:this._formRole[this.unit],tabindex:this.unit!=="header"&&this.unit!=="select"&&-1,onClick:t===!0?function(o){var a=o.target;S(function(){i.handleOnInput(a)},0)()}:void 0,onKeyDown:t===!0?function(o){i.handleOnKeydown(o),i.handleKeyPress(o)}:void 0,onFocus:t===!0?function(){return i.handleOnFocusBlur("focus")}:void 0,onBlur:t===!0?function(){return i.handleOnFocusBlur("blur")}:void 0},this.unit==="select"&&this.SelectBase(b(this.filter),b(this.clear),b(this.selectAll),b(this.disabled)),this.unit!=="select"&&g(V,{key:"a89d6ecb574b65e2610c581752792110e94c183f",tag:this._tag,unit:this.unit,color:this.color,meta:this.getParentMeta(),selected:b(this.selected)===!0}))},s.prototype.connectedCallback=function(){var e;this.unit==="select"&&((e=this._selection)===null||e===void 0?void 0:e.label)===void 0&&(this._selection.label=this.label),this.unit==="select"&&this.value!==null&&this.value!==void 0&&this.getInitialValue()!==null&&this.setInitialValue(this.getInitialValue())},s.prototype.componentDidLoad=function(){this.unit==="select"&&b(this.filter)===!0&&this.enableFirstOption()},s.prototype.componentDidUpdate=function(){var e=this,i,t,n;if(this._searchTerm){var l=(t=(i=this.el)===null||i===void 0?void 0:i.parentElement)===null||t===void 0?void 0:t.querySelectorAll(".unit-option");if(l){var d=(n=Array.from(l))===null||n===void 0?void 0:n.filter(function(o){var a,v;return(v=(a=o==null?void 0:o.textContent)===null||a===void 0?void 0:a.toLowerCase())===null||v===void 0?void 0:v.startsWith(e._searchTerm)});d.length>0&&d[0].focus({focusVisible:!1})}}},Object.defineProperty(s,"formAssociated",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"el",{get:function(){return L(this)},enumerable:!1,configurable:!0}),Object.defineProperty(s,"watchers",{get:function(){return{display:["selectionFocus"]}},enumerable:!1,configurable:!0}),s}();export{K as neu_select};
