import{h as u,H as y,g,r as _,c as h}from"./index-BkPA8iPD.js";import{a as w,c as T,w as p,b as f,e as m,u as E}from"./utilities-a180c6fa-DAHwV70L.js";import{b as S,a as k}from"./functionals-0e75fd99-C13bBhA7.js";import{S as x}from"./functionals-17c2ba0b-BL2kwYE4.js";/*!
 * (C) HCA Healthcare Inc. http://hcahealthcare.com - MIT License
 */var C=function(a){var e=a.field,t=a.id,i=a.display,n=a.disabled,o=a.label,l=a.onClickEvent,d=function(){l&&l()};return u("button",{"aria-expanded":i===!0?"true":"false","aria-labelledby":"".concat(t,"-label"),"aria-describedby":"".concat(t,"-support"),class:"".concat(e,"--placeholder"),disabled:n===!0?!0:void 0,id:"".concat(t,"-placeholder"),role:"combobox",tabindex:n===!0?-1:0,onClick:n===!1?function(){d()}:void 0},u("div",{class:"placeholder-wrapper ".concat(o===""||o==="HH:MM"?"neu-text-gray-60":void 0)},o))},I=function(a){var e=a.id,t=a.classList,i=a.disabled,n=a.value,o=a.label,l=a.current,d=a.onClickEvent,c=a.onKeyDownEvent,s=function(r){d&&i===!1&&d(r)},v=function(r){c&&i===!1&&c(r)};return u("button",{"aria-selected":n===l?"true":"false",class:t,disabled:i,id:"".concat(e,"--").concat(n.replace(":","")),role:"option",tabindex:-1,value:n,onClick:function(r){return s(r)},onKeyDown:function(r){return v(r)}},o)},D=function(){function a(e){_(this,e),this.neuForm=h(this,"neuForm"),this.neuChange=h(this,"neuChange"),this.neuFocus=h(this,"neuFocus"),this.neuBlur=h(this,"neuBlur"),e.$hostElement$["s-ei"]?this.internals=e.$hostElement$["s-ei"]:(this.internals=e.$hostElement$.attachInternals(),e.$hostElement$["s-ei"]=this.internals),this._tag="neu-form",this._field="neu-time-select",this._id=E("ts"),this._display=!1,this._disabledTime=[],this._selection={label:"HH:MM",value:""},this.autocomplete="off",this.disabled=void 0,this.invalid=void 0,this.label=void 0,this.labelHidden=!1,this.name=void 0,this.pattern=void 0,this.readonly=!1,this.required=void 0,this.step=void 0,this.tip=void 0,this.color="blue",this.kind="standard",this.value=void 0,this.interval=30,this.startTime="00:00",this.endTime="23:30",this.disabledTime=void 0,this.debounce=0,this.error=!1,this.clear=!1}return a.prototype.formatTime=function(e){var t=new Date("1970-01-01T".concat(e,":00")),i=t.getHours(),n=t.getMinutes(),o=i>=12?"PM":"AM";i=i%12,i=i||12;var l=n<10?"0"+n:n;return"".concat(i,":").concat(l," ").concat(o)},a.prototype.handleEmit=function(e){var t=this,i;this.value=e!=null&&e.value?e.value:null;var n={component:this._field,id:e.id,name:e.name,label:e.label,value:this.value,kind:this.kind};this.neuForm.emit(n),this.neuChange.emit(n);var o=setTimeout(function(){var d=document.getElementById("".concat(t._id,"-hidden"));d&&(d.value=t.value),clearTimeout(o)},15);try{var l=this.value!==void 0?this.value:null;(i=this.internals)===null||i===void 0||i.setFormValue(l)}catch{}return!0},a.prototype.handleOnInput=function(e){var t,i,n=(i=(t=e==null?void 0:e.attributes)===null||t===void 0?void 0:t.value)===null||i===void 0?void 0:i.value,o=(e==null?void 0:e.textContent)||(e==null?void 0:e.getAttribute("aria-label"));n&&o&&(this.value=n,this.handleEmit({id:this._id,name:this._id,label:o,value:n})),this.dropdownClose(this._id)},a.prototype.getNextValidSibling=function(e){for(var t=e==null?void 0:e.nextElementSibling;t&&!(t!=null&&t.classList.contains("unit-option"))||t!=null&&t.classList.contains("state-disabled");)t=t==null?void 0:t.nextElementSibling;return t},a.prototype.getPreviousValidSibling=function(e){for(var t=e==null?void 0:e.previousElementSibling;t&&!(t!=null&&t.classList.contains("unit-option"))||t!=null&&t.classList.contains("state-disabled");)t=t==null?void 0:t.previousElementSibling;return t},a.prototype.handleOnKeydown=function(e){var t=e==null?void 0:e.target,i=document.getElementById(t==null?void 0:t.id);if(i){var n=this.getNextValidSibling(i),o=this.getPreviousValidSibling(i);(e==null?void 0:e.key)===" "||w(e)?(e.preventDefault(),this.el.click(),this.handleOnInput(e.target)):n&&(e==null?void 0:e.key)==="ArrowDown"?(e.preventDefault(),n.setAttribute("tabindex","0"),n.focus({focusVisible:!1}),o&&o.setAttribute("tabindex","-1")):o&&(e==null?void 0:e.key)==="ArrowUp"&&(e.preventDefault(),o.setAttribute("tabindex","0"),o.focus({focusVisible:!1}),n&&n.setAttribute("tabindex","-1"))}},a.prototype.enableFirstOption=function(){var e=this,t=setTimeout(function(){var i=document.getElementById(e._id),n=i==null?void 0:i.querySelector(".unit-dropdown"),o=n==null?void 0:n.querySelector(".dropdown-menu");if(i&&n&&o){var l=o.querySelector(".unit-option");l&&l.setAttribute("tabindex","0")}clearTimeout(t)},10)},a.prototype.handleOnFocusBlur=function(e){e==="focus"?this.neuFocus.emit({component:this._field,id:this._id}):this.neuBlur.emit({component:this._field,id:this._id})},a.prototype.dropdownClick=function(){var e=this._display;if(this.el&&this._id)if(e===!0)this.dropdownClose(this._id);else{var t=document.getElementById(this._id),i=document.getElementById("".concat(this._id,"-placeholder")),n=document.getElementById("".concat(this._id,"-dropdown"));t&&i&&n&&(this.dropdownOpen(t,i,n),this.dropdownCloseOthers(this._id),this.dropdownFocusFirst(this._id))}},a.prototype.dropdownOpen=function(e,t,i){this._display=!0,e.classList.add("state-active"),t.setAttribute("aria-expanded","true"),T(t,i,"bottom-start",["top-start","bottom-end","top-end"],10,[0,4])},a.prototype.dropdownClose=function(e,t){t===void 0&&(t=!0);var i=document.getElementById(this._id),n=document.getElementById("".concat(this._id,"-placeholder")),o=document.getElementById("".concat(this._id,"-dropdown"));i&&n&&o&&(i.classList.remove("state-active"),n.setAttribute("aria-expanded","false"),o.setAttribute("aria-expanded","false"),this._display=!1,t&&this.focusSelectTrigger())},a.prototype.dropdownCloseOthers=function(e){var t=document==null?void 0:document.querySelectorAll(".unit-dropdown");t&&t.forEach(function(i){var n,o,l,d=i.id.replace("-dropdown","");d!==e&&(i==null||i.setAttribute("aria-expanded","false"),(n=i==null?void 0:i.previousElementSibling)===null||n===void 0||n.setAttribute("aria-expanded","false"),(l=(o=i==null?void 0:i.parentElement)===null||o===void 0?void 0:o.parentElement)===null||l===void 0||l.classList.remove("state-active"))})},a.prototype.dropdownFocusFirst=function(e){var t=document.getElementById(e),i=t==null?void 0:t.querySelector(".unit-dropdown"),n=i==null?void 0:i.querySelector(".dropdown-menu");if(t&&i&&n){var o=n.querySelector(".unit-option");if(o)var l=setTimeout(function(){o.setAttribute("tabindex","0"),o.focus({focusVisible:!1}),clearTimeout(l)},100)}return!0},a.prototype.dropdownClickOutside=function(e){this.el.contains(e.target)||this.dropdownClose(this._id,!1)},a.prototype.dropdownKeyDown=function(e){if(this.el.contains(document.activeElement)){var t=this.el,i=(t==null?void 0:t.classList.contains("state-active"))||!1;if(e.key==="Escape"){this._display=!1,t.classList.remove("state-active"),t.setAttribute("aria-expanded","false");var n=document.getElementById("".concat(this._id,"-placeholder"));n&&n.focus({focusVisible:!1})}else if(e.key==="Tab"&&t&&i===!0)var o=setTimeout(function(){var l,d,c,s=document==null?void 0:document.activeElement,v=!0;(((d=(l=s==null?void 0:s.parentElement)===null||l===void 0?void 0:l.parentElement)===null||d===void 0?void 0:d.classList.contains("unit-dropdown"))===!0||((c=s==null?void 0:s.parentElement)===null||c===void 0?void 0:c.classList.contains("dropdown-menu"))===!0)&&(v=!1),v===!0&&(t==null||t.classList.remove("state-active")),clearTimeout(o)},0);return!0}},a.prototype.selectionClear=function(e){var t=document.getElementById(e),i=document.getElementById("".concat(e,"-dropdown"));if(t&&i){var n=i==null?void 0:i.querySelectorAll(".unit-option");n&&(n==null?void 0:n.length)>0&&n.forEach(function(o){o.removeAttribute("selected"),o.classList.remove("state-active")})}},a.prototype.selectionEmit=function(e){var t=this,i,n,o=e.detail.id===this._id;if(o)var l=(i=e==null?void 0:e.detail)===null||i===void 0?void 0:i.label,d=(n=e==null?void 0:e.detail)===null||n===void 0?void 0:n.value,c=setTimeout(function(){(l===void 0||l==="null"||l=="")&&(l=t.label),t.value=d,t._selection={label:l,value:d},clearTimeout(c)},25);else{var s=document.getElementById(e.detail.id),v=document.getElementById("".concat(e.detail.id,"-placeholder")),r=document.getElementById("".concat(e.detail.id,"-dropdown"));s==null||s.classList.remove("state-active"),v==null||v.setAttribute("aria-expanded","false"),r==null||r.setAttribute("aria-expanded","false"),this._display=!1}return!0},a.prototype.generateTimeIntervals=function(){for(var e=[],t=new Date("1970-01-01T".concat(this.startTime,":00")),i=new Date("1970-01-01T".concat(this.endTime,":00")),n=t;n<=i;)e.push(n.toTimeString().slice(0,5)),n=new Date(n.getTime()+this.interval*6e4);return e},a.prototype.parseDisabledTime=function(){this.disabledTime&&this.disabledTime!==void 0&&this.setDisabledTime()},a.prototype.setDisabledTime=function(){var e,t;if(typeof this.disabledTime=="string")try{this._disabledTime=JSON.parse((t=(e=this.disabledTime)===null||e===void 0?void 0:e.split("'"))===null||t===void 0?void 0:t.join('"'))}catch(i){p("There was an error parsing the disabled times for the Time Select Component.",i)}else try{this._disabledTime=JSON.parse(JSON.stringify(this.disabledTime))}catch(i){p("There was an error parsing the disabled times for the Time Select Component.",i)}},a.prototype.focusSelectTrigger=function(){var e=this._id,t=document.getElementById("".concat(e,"-placeholder"));if(t)var i=setTimeout(function(){t!==null&&t.focus({focusVisible:!1}),clearTimeout(i)},50);return!0},a.prototype.clearSetSelection=function(){return this.value=null,this._selection={label:"HH:MM",value:""},this.focusSelectTrigger(),!0},a.prototype.render=function(){var e,t=this,i,n=(e={},e["".concat(this._tag)]=!0,e["".concat(this._field)]=!0,e["color-".concat(this.color)]=!0,e["state-optional"]=f(this.required)===!1,e["state-disabled"]=f(this.disabled)===!0,e["state-error"]=!!f(this.error),e);return u(y,{key:"3c590725d72b4b49aa87593da3d44661954ded25",class:n,id:this._id},u(k,{key:"fbf15261b0d179e7ccae40eaa600f4c001907997",id:this._id,tag:this._tag,label:this.label===void 0?this._id+"-label":this.label,labelHidden:f(this.labelHidden)===!0&&f(this.clear)===!1,required:f(this.required)===!0}),u("div",{key:"c081a9212d561923d4b68e64ca2ac9257c3fd274",class:"".concat(this._tag,"__native"),id:"".concat(this._id,"-native"),tabindex:"-1"},u(C,{key:"bedfedd73b3a4278f76b6699c33f5a33245d1d95",id:this._id,field:this._field,display:f(this._display)===!0,disabled:f(this.disabled)===!0,label:(i=this._selection)===null||i===void 0?void 0:i.label,onClickEvent:m(function(){return t.dropdownClick()},10)}),u("div",{key:"8d66c8e44de21998e3275a1c712f1a273f147e14","aria-labelledby":"".concat(this._id,"-label"),class:"unit-dropdown",id:"".concat(this._id,"-dropdown")},u("div",{key:"6054ad4da8b6b2e61d63dce6c2ecaf5758ddcc32",class:"dropdown-menu",role:"listbox"},this.generateTimeIntervals().map(function(o){var l,d,c=t.kind==="standard"?t.formatTime(o):o,s=!!(!((d=t._disabledTime)===null||d===void 0)&&d.includes(o)),v=(l={},l["unit-option"]=!0,l["state-active"]=o===t.value,l["state-disabled"]=s,l);return u(I,{id:t._id,classList:v,disabled:s,value:o,current:t.value,label:c,onClickEvent:function(r){var b=r.target;m(function(){t.handleOnInput(b)},0)()},onKeyDownEvent:function(r){t.handleOnKeydown(r)}})}))),u("input",{key:"6651971e5e20848d1c8fd1498df3f31b23adf108",type:"hidden",name:this._id,id:"".concat(this._id,"-hidden"),value:this.value})),f(this.clear)===!0&&f(this.disabled)===!1&&u(x,{key:"2464a6b2d4842c2ba0692b29186aee1b2dd32042",tag:this._tag,onClickEvent:function(){return t.clearSetSelection()}}),u(S,{key:"cb024aa925366ffedcdf685695101bb3e5355c1a",tag:this._tag,id:this._id,tip:this.tip,invalid:this.invalid}))},a.prototype.componentDidLoad=function(){this.enableFirstOption()},a.prototype.componentWillLoad=function(){this.parseDisabledTime()},Object.defineProperty(a,"formAssociated",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"el",{get:function(){return g(this)},enumerable:!1,configurable:!0}),Object.defineProperty(a,"watchers",{get:function(){return{disabledTime:["parseDisabledTime"]}},enumerable:!1,configurable:!0}),a}();export{D as neu_time_select};
